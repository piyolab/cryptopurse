!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){const n=ethereumjs.Wallet,o=ethereumjs.Util,a=ethereumjs.Tx,r={Keys:{KEY_ETH_ADDRESS:"KEY_ETH_ADDRESS",KEY_ETH_PRIVATE_KEY:"KEY_ETH_PRIVATE_KEY",KEY_ETH_CREATED_AT:"KEY_ETH_CREATED_AT",KEY_ETH_GAS_PRICE:"KEY_ETH_GAS_PRICE"},ETH_GAS_LIMIT:21e3,ETH_DEFAULT_GAS_PRICE:2e10,HTTP_PROVIDERS:["https://mainnet.infura.io","","https://ropsten.infura.io"],ETHERSCAN_URLS:["https://etherscan.io/","","https://ropsten.etherscan.io/"]};let i={web3:null,wallet:null,chainId:1};const l="Something Wrong ><...";var c=document.createElement("video"),s=document.getElementById("reader-camera-preview"),d=s.getContext("2d"),u=$("#reader-loading-message"),f=new QRCodeReader(jsQR,c,d);function g(e){const t=e.getAddressString(),n=e.getPrivateKeyString();localStorage.setItem(r.Keys.KEY_ETH_ADDRESS,t),localStorage.setItem(r.Keys.KEY_ETH_PRIVATE_KEY,n),localStorage.setItem(r.Keys.KEY_ETH_CREATED_AT,Math.floor(Date.now()/1e3))}function m(){$("#my-address").val(i.wallet.getAddressString())}function w(){const e=i.wallet.getAddressString();$("#my-address-balance").text("...");i.web3.eth.getBalance(e,function(e,t){if(e)alert(l);else{let e=i.web3.fromWei(t,"ether");e=e.toFormat(6,i.web3.BigNumber.ROUND_DOWN),$("#my-address-balance").text(e)}})}function p(e){const t=i.web3.fromWei(e,"gwei");return!isNaN(t)&&t>=1&&t<=99}function h(){return i.web3.fromWei(function(){let e=localStorage.getItem(r.Keys.KEY_ETH_GAS_PRICE);return p(e)||(e=r.ETH_DEFAULT_GAS_PRICE),e}(),"gwei")}function v(e){p(e)&&localStorage.setItem(r.Keys.KEY_ETH_GAS_PRICE,e)}function E(e){const t=i.wallet.getAddressString(),n=$("#to-address").val(),c=$("#to-amount").val(),s=i.web3.toWei(c,"ether");o.isValidAddress(n)?s<=0?alert("Please enter a valid amount."):function(e,t){i.web3.eth.getTransactionCount(e,function(e,n){if(e)alert(l),console.error(e);else{const e=i.web3.toHex(n);t(e)}})}(t,function(t){const c=i.web3.toHex(r.ETH_DEFAULT_GAS_PRICE),d=i.web3.toHex(r.ETH_GAS_LIMIT),u=i.web3.toHex(s),f=function(e,t,n,o,r){const l={nonce:e,to:t,gasPrice:n,gasLimit:o,value:r,chainId:i.chainId};return new a(l)}(t,n,c,d,u);f.sign(o.toBuffer(i.wallet.getPrivateKeyString())),function(e,t){i.web3.eth.sendRawTransaction(e,function(e,n){e?(alert(l),console.error(e)):t(n)})}("0x"+f.serialize().toString("hex"),function(t){e(t)})}):alert("Please enter a valid address.")}function _(){$("#adjust-gas-modal-btn").on("click",function(e){$("#gasprice-amount").val(h())}),$("#adjust-gas-reset-btn").on("click",function(e){v(r.ETH_DEFAULT_GAS_PRICE),$("#gasprice-amount").val(h()),x("Saved!")}),$("#adjust-gas-save-btn").on("click",function(e){!function(e){v(i.web3.toWei(e,"gwei"))}($("#gasprice-amount").val()),$("#gasprice-amount").val(h()),x("Saved!")})}function b(){$("#to-address").on("focus",function(){$(this).select()}),$("#send-eth-to-confirm-btn").on("click",function(){!function(){var e=null,t=null;const n=$("#to-address").val(),a=$("#to-amount").val(),r=i.web3.toWei(a,"ether");!o.isValidAddress(n)||r<=0?($("#send-eth-btn").hide(),t="Error",e="Enter a valid address and amount."):($("#send-eth-btn").show(),t="Are you sure?",e="You are about to send "+$("#to-amount").val()+" ETH to "+$("#to-address").val()),$("#send-eth-confirm-modal-title").text(t),$("#send-eth-confirm-modal-msg").text(e)}()}),$("#send-eth-btn").on("click",function(){$("#send-eth-confirm-modal").modal("toggle"),E(function(e){const t=r.ETHERSCAN_URLS[i.chainId-1],n=$("<a></a>",{href:t+"tx/"+e,target:"_blank",text:"Check the tx in etherscan.io"});$("#tx-result-modal-msg").html(n),$("#tx-result-modal").modal("toggle")})})}function T(){$("#my-address-share-btn").on("click",function(){$("#share-output").val(R(0)),$("#share-modal").modal("toggle")}),$("#share-amount").on("input",function(e){let t=$("#share-amount").val();isNaN(t)||$("#share-output").val(R(t))}),$("#share-output-copy-btn").on("click",function(e){Clipboard.copyOnModal($("#share-output").val(),$("#share-modal").get(0)),x("Copied!")})}function y(){$("#export-wallet-btn").on("click",function(){$("#privatekey-output").val(i.wallet.getPrivateKeyString()),$("#export-wallet-modal").modal("toggle"),$("#privatekey-output-modal").modal("toggle")}),$("#privatekey-output").on("focus",function(){$(this).select()}),$("#privatekey-output-copy-btn").on("click",function(){$("#privatekey-output").select(),Clipboard.copyOnModal(i.wallet.getPrivateKeyString(),$("#privatekey-output-modal").get(0)),x("Copied!")})}function S(){$("#import-wallet-btn").on("click",function(){$("#import-wallet-modal").modal("toggle"),$("#privatekey-input-modal").modal("toggle")}),$("#privatekey-input-btn").on("click",function(){!function(){const e=$("#privatekey-input").val(),t=o.toBuffer(e);try{i.wallet=n.fromPrivateKey(t),g(i.wallet),m(),$("#privatekey-input-modal").modal("toggle"),w()}catch(e){console.error(e),alert(e)}}()})}function A(){null!=i.wallet?($("#my-address-balance-reload-btn").on("click",function(){w()}),$("#my-address-copy-btn").on("click",function(e){const t=i.wallet.getAddressString();Clipboard.copy(t),x("Copied!")}),$("#my-address-qr-btn").on("click",function(){const e=i.wallet.getAddressString();$("#qrcode-modal-msg").text(e),$("#qrcode").empty(),new QRCode(document.getElementById("qrcode"),e)}),b(),$("#qrcode-reader-modal").on("show.bs.modal",function(){f.start(function(){u.text("⌛ Loading video...")},function(e){$("#reader-loading-message").text("🙅‍♀️"+e.name)})}),$("#qrcode-reader-modal").on("hide.bs.modal",function(e){f.stop()}),y(),S(),T(),_()):$("#create-wallet-btn").on("click",function(){i.wallet=n.generate(),g(i.wallet),window.location.reload()})}function R(e){let t="https://cryptopurse.app/eth/?to="+i.wallet.getAddressString();return e>0&&null!=e&&(t=t+"&value="+e),t}function I(){if(function(){const e=window.navigator.userAgent.toLowerCase();return chrome=/crios/.test(e),!!chrome}())return!1;var e=window.navigator.standalone,t=window.navigator.userAgent.toLowerCase(),n=/safari/.test(t),o=/iphone|ipod|ipad/.test(t);return!!(o&&!e&&!n||o&&!k())}function k(){return void 0!=navigator.mediaDevices&&void 0!=navigator.mediaDevices.getUserMedia}function H(){I()?($("#webview-warning").show(),$("#browser-link").text(location.href)):null==i.wallet&&$("#create-wallet").show(),function(){k()||$("#to-address-read-from-camera").hide();(null==i.wallet||I())&&($("#main-contents").hide(),$("#navbarToggleButton").hide())}()}function P(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?null:decodeURIComponent(t[1].replace(/\+/g," "))}function x(e){$("<div>",{id:"snackbar",text:e}).appendTo("body"),$("#snackbar").addClass("show"),setTimeout(function(){$("#snackbar").remove()},1e3)}f.onPreview=function(e){u.hide(),s.hidden=!1,s.height=e.videoHeight,s.width=e.videoWidth,d.drawImage(e,0,0,s.width,s.height)},f.onData=function(e){i.web3.isAddress(e)?($("#qrcode-reader-modal").modal("hide"),$("#to-address").val(e)):console.error("Invalid data: "+e)},$(document).ready(function(){!function(e){const t=localStorage.getItem(r.Keys.KEY_ETH_PRIVATE_KEY);if(null==t||""==t);else{const e=o.toBuffer(t);i.wallet=n.fromPrivateKey(e)}e()}(function(){var e,t;i.wallet&&(e=function(e){var t,n;!function(e){e.to&&$("#to-address").val(e.to),e.value&&$("#to-amount").val(e.value),e.network&&(i.chainId=parseInt(e.network))}(e),function(e){i.web3=new Web3(new Web3.providers.HttpProvider(e))}((t=e.network,n=r.HTTP_PROVIDERS[0],null!=t&&t<=r.HTTP_PROVIDERS.length&&(n=r.HTTP_PROVIDERS[t-1]),n))},(t={}).to=P("to"),t.value=P("value"),t.network=P("network"),e(t),function(){const e=r.ETHERSCAN_URLS[i.chainId-1]+"address/"+i.wallet.getAddressString();$("#etherscan-link").attr("href",e),m(),w()}())}),A(),H()})}]);